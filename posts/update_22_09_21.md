---
title: 'Прогресс по проекту'
date: '2021-09-22'
language:  'ru'
---



### Разметка исторических карт
Научился делать привязку исторических карт к существующему ландшафту. Сделал такую привязку для карты 1881 года(она самая красочная и подробная в моей коллекции)

Получается примерно вот так:

![/images/Screenshot_2.png](/images/Screenshot_2.png)
_Дегтярная площадь_
![/images/Screenshot_2.png](/images/Screenshot_3.png)
_Ильинская площадь_
![/images/Screenshot_4.png](/images/Screenshot_4.png)
_Хлебная площадь(сейчас Театральная - по карте видно, что административных зданий раньше не существовало)_


### Разметка зданий
Купил софт для моделирования городов - [City Engine](https://www.esri.com/en-us/arcgis/products/arcgis-cityengine/overview) 

После того как разметил карту, смог импортировать ее в Сity Engine. Важно было импортировать не только историческую карту, но и карту высот, чтобы город был не плоским, а соответствовал хотя бы существующему рельефу.
Потом нашел и импортировал существующие GIS данные по городу - пятна застроек домов и разметку дорог 

![/images/Screenshot_5.png](/images/Screenshot_5.png)
_Тут я немного поэкспериментировал и использовал существующее плавило генерации французских домов примененное на пятна застройки существующих зданий. В принципе, выглядит интересно._

Так как пространства для работы много, пришлось ограничить круг работы. Сейчас это улица Немецкая с несколькими прилегающими территориями. Сад Липки и площадь с памятником выглядит граздо сложнее перекрестков - на ней много обьектов которые надо моделировать вручную и большие пространства

![/images/Screenshot_6.png](/images/Screenshot_6.png)



![/images/Screenshot_7.png](/images/Screenshot_7.png)
![/images/img_1.png](/images/img_1.png)
_Это пересечение Кирова и Горького, вдали виднен сад "Липки". Зеленые дома - это те, которые существовали в 1913 году, белым - необработанные или новострой_

###  Просмотр контента
Рабочая идея на данный момент - создать несколько сцен(хотя бы одну для начала), которые можно просмотреть через мобильное приложение в телефоне

Я выбрал для создания такого приложения Unreal Engine. Мотивация была следующая:  
* Удобный способ импорта сцен (через datasmith все отлично экспортируется из city engine и импортируется в unreal)
* Мобильные платформы менее требовательны к качеству графики, и это легко достичь используя даже исходный контент из city engine(тем не менее без оптимизации не обойтись)
* Возможность распространения приложения. Скомпилированное приложение достаточно просто распространить через Google Store/Apple Store (сейчас пока что целевой магазин - Google Store)
* Потенциальная возможность забирать данные по мешам "на лету" из сервисов arcgis (т.е. подгружать дома при проходе сцены, а не "запекать" их в одном уровне). BTW эта опция присутствует и в Unity 

Ниже приведу скриншоты результатов экспериментов с движком:

![/images/photo_4.jpeg](/images/photo_4.jpeg)
_Примерно то же место(Кирова\Горького) из скомпилированного приложения. Скриншот с телефона_

![/images/photo_3.jpeg](/images/photo_3.jpeg)
_Вид сверху. на фотке видны глитчи из-за разности высот. Сейчас уже поправлены_

![/images/photo_1.jpeg](/images/photo_1.jpeg)
_Качество рендера импортированной модели_

![/images/photo_2.jpeg](/images/photo_2.jpeg)
_Скриншоты для сверки моделей, сгенерированных по правилу(многоэтажное здание) и импортированных из приложений для 3д моделирования(деревянный одноэтажный дом)_

Правила для генерации взяты достаточно базовые, и пока не выглядят выигрышно. Их можно делать гораздо более качественными и детальными, например

![/images/Screenshot_8.png](/images/Screenshot_8.png)

Сейчас вижу следующие направления для работы
* Продолжение разметки города на дату 1913 года (поиск карт, сверка с историческими данными)
* Написание правил для генерации домов в стиле Саратова
* Добавление генерации деталей - фонарные столбы, разные типы дорог, зеленые насаждения, заборы
* Создание детальных моделей исторических зданий
* Проработка импорта ассетов и оптимизация их под мобильные приложения
* Написание приложения для просмотра для многих сцен
* Эксперименты с AR (наложение 3д контента на географическую привязку)

Конечно же одному это сделать нереально, так что если кому интересна какая-то из частей работы - буду рад пообщаться

---
[nickolay.pol@gmail.com](mailto:nickolay.pol@gmail.com),  [@radigost](https://t.me/radigost) 
